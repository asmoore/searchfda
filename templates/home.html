{% extends "base.html" %}
{% block content %}


<div class="row" id="search-row">
  <div class="splash">
    <img id="splash-image" src="{{ url_for('static', filename='images/splash-1.png') }}"/>
  </div>
  <div class="splash-header">
    <h1>SearchFDA</h1>
    <h3>Search through public FDA data</h3>
  </div>
  <div class="search-container">
    <input type="text" id="search-input" list="json-datalist" placeholder="e.g. datalist">
    <datalist id="json-datalist"></datalist>
    <span class="postfix" onclick="search()">Search</span>
  </div>      
</div>

<script> 
  function search() {
    document.location.href = "/search=" + document.getElementById("search-input").value + "/" ;
  }
</script>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script>

  // Get the <datalist> and <input> elements.
  $('#search-input').on('input', function() { 
    $.ajax({
      url: "/autocomplete",
      type: 'POST',
      data: $(this).val(),
      contentType: 'application/json',
      success: function(result) {
        //only returns one value right now. Can't get list working.
        var options = '<option value="'+result+'" />';
        div = document.getElementById('json-datalist');
        div.innerHTML = options;
      }
    });
  });

</script>

{% endblock %}
